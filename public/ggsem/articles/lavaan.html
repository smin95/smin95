<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3. Visualizing Structural Equation Modeling Diagrams • ggsem</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="3. Visualizing Structural Equation Modeling Diagrams">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/elements.html">1. Drawing Elements</a></li>
    <li><a class="dropdown-item" href="../articles/networks.html">2. Plotting Networks</a></li>
    <li><a class="dropdown-item" href="../articles/lavaan.html">3. Visualizing Structural Equation Modeling Diagrams</a></li>
    <li><a class="dropdown-item" href="../articles/annotations.html">4. Annotating Any ggplot Object</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/smin95/ggsem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>3. Visualizing Structural Equation Modeling Diagrams</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/smin95/ggsem/blob/HEAD/vignettes/lavaan.Rmd" class="external-link"><code>vignettes/lavaan.Rmd</code></a></small>
      <div class="d-none name"><code>lavaan.Rmd</code></div>
    </div>

    
    
<p>In this chapter, we will visualize structural equation modeling (SEM)
diagrams.</p>
<div class="section level2">
<h2 id="the-lavaan-packages-syntax">The <strong>lavaan</strong> Package’s Syntax<a class="anchor" aria-label="anchor" href="#the-lavaan-packages-syntax"></a>
</h2>
<p>In psychology, the <strong>lavaan</strong> package has been widely
used for structural equation modeling (SEM) in R. It integrates methods
such as factor analysis, regression models and path analysis into a
coherent framework, allowing researchers to study how different
variables are related to one another. Basically, models can be specified
using strings in a particular syntax of the <strong>lavaan</strong>
package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># latent variable definitions</span></span>
<span><span class="va">reading</span> <span class="op">=</span><span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span></span>
<span><span class="va">math</span> <span class="op">=</span><span class="op">~</span> <span class="va">x4</span> <span class="op">+</span> <span class="va">x5</span> <span class="op">+</span> <span class="va">x6</span></span>
<span><span class="va">music</span> <span class="op">=</span><span class="op">~</span> <span class="va">x7</span> <span class="op">+</span> <span class="va">x8</span> <span class="op">+</span> <span class="va">x9</span></span>
<span></span>
<span><span class="va">music</span> <span class="op">~</span><span class="op">~</span> <span class="va">math</span></span></code></pre></div>
<p>In this example, there are three latent variables
(<code>reading</code>, <code>math</code> and <code>music</code>) and
nine observed variables (<code>x1</code> to <code>x9</code>). A latent
variable can be inferred from a set of data from other variables but not
directly observed. Usually, it captures an index that cannot easily be
measured or quantified.</p>
<p>The string <code>=~</code> is a syntax from <strong>lavaan</strong>,
often used to define the relationship between latent and observed
variables. It can be translated as “is measured by” or “is indicated
by”. For instance, <code>music   =~ x7 + x8 + x9</code> means that the
latent variable <code>music</code> can be measured with the three
variables <code>x7</code>, <code>x8</code>, <code>x9</code>, such as the
sense of rhythm, reading ability in music scores, and aptitude in
learning to play a musical instrument. In other words, the
<code>=~</code>operator in <strong>lavaan</strong> denotes a one-way
direction. By convention, such as in the <strong>semPlot</strong>
package, a one-way arrow drawn from the latent variable to the observed
variable</p>
<p>Therefore, to translate the strings above, <code>reading</code> can
be measured by <code>x1</code>, <code>x2</code> and <code>x3</code>
variables (ex. language), <code>math</code> can be measured by
<code>x4</code>, <code>x5</code> and <code>x6</code> variables, and
<code>music</code> can be measured by <code>x7</code>, <code>x8</code>
and <code>x9</code> variables.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>running distance <span class="sc">~</span> stamina</span></code></pre></div>
<p>Additionally, the <code>~</code> operator indicates a causal
relationship from the independent variable to the dependent variable. It
is also a one-way relationship. For instance, if one’s stamina is very
high, then one’s running distance will be much longer.</p>
<p>Both <code>~</code> (regression) and <code>=~</code> are shown as a
one-way arrow in SEM diagrams, and these are recognized by the
<strong>ggsem</strong> app in similar fashion as that in
<strong>semPlot</strong>.</p>
<p>‘~~’ refers to covariance, and <strong>ggsem</strong> plots it as a
two-way arrow (straight rather than curved) just like in
<strong>semPlot</strong> (curved).</p>
</div>
<div class="section level2">
<h2 id="drawing-lavaan-input">Drawing <strong>lavaan</strong> input<a class="anchor" aria-label="anchor" href="#drawing-lavaan-input"></a>
</h2>
<p>Let’s run the app locally using the code below (faster than online:
<a href="https://smin95.shinyapps.io/ggsem/" class="external-link uri">https://smin95.shinyapps.io/ggsem/</a>):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggsem</span><span class="fu">::</span><span class="fu"><a href="../reference/launch.html">launch</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="sem_fig2.png" width="50%" style="display: block; margin: auto auto auto 0;"></p>
<p>We can start by visualizing the SEM diagram using the strings:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># latent variable definitions</span></span>
<span><span class="va">reading</span> <span class="op">=</span><span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span></span>
<span><span class="va">math</span> <span class="op">=</span><span class="op">~</span> <span class="va">x4</span> <span class="op">+</span> <span class="va">x5</span> <span class="op">+</span> <span class="va">x6</span></span>
<span><span class="va">music</span> <span class="op">=</span><span class="op">~</span> <span class="va">x7</span> <span class="op">+</span> <span class="va">x8</span> <span class="op">+</span> <span class="va">x9</span></span>
<span></span>
<span><span class="va">music</span> <span class="op">~</span><span class="op">~</span> <span class="va">math</span></span></code></pre></div>
<p>This string is already written down in the text area of
<strong>Lavaan Syntax</strong> under the <strong>Lavaan Input</strong>
menu. If readers want to supply their own models, then delete this
sample string. Here are some important inputs for drawing a SEM diagram
from a lavaan model.</p>
<ol style="list-style-type: decimal">
<li><p><strong>Relative X Node Position</strong>: Relative horizontal
spacing between points. The larger the distance, the larger the
horizontal gap.</p></li>
<li><p><strong>Relative Y Node Position</strong>: Relative vertical
spacing between points. The larger the distance, the larger the vertical
gap.</p></li>
<li><p><strong>Line Endpoint Spacing</strong>: Spacing between a node
and a edge’s endpoint.</p></li>
<li><p><strong>Latent Variable Color</strong>: Color of the nodes that
represent latent variables.</p></li>
<li><p><strong>Observed Variable Color</strong>: Color of the nodes that
represent observed variables.</p></li>
<li><p><strong>Latent Variable Size</strong>: The size of the nodes that
represent latent variables.</p></li>
<li><p><strong>Observed Variable Size</strong>: The size of the nodes
that represent observed variables.</p></li>
<li><p><strong>Choose Layout Algorithms</strong>: Layout of the nodes
and edges. The layouts are from the <strong>semPlot</strong> package.
These include <em>Tree</em>, <em>Circle</em>, <em>Spring</em>,
<em>Tree2</em>, <em>Circle2</em> and <em>Default</em>.</p></li>
</ol>
<p>We will adjust these inputs as:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Relative Node X Position</strong>: 20</p></li>
<li><p><strong>Relative Node Y Position</strong>: 20</p></li>
<li><p><strong>Line Endpoint Spacing</strong>: 4</p></li>
<li><p><strong>Latent Variable Color</strong>: #FAAACB</p></li>
<li><p><strong>Observed Variable Color</strong>: #F7D7EF</p></li>
<li><p><strong>Latent Variable Size</strong>: 75</p></li>
<li><p><strong>Observed Variable Size</strong>: 58</p></li>
<li><p><strong>Choose Layout Algorithms</strong>:
<em>Spring</em></p></li>
</ol>
<p>There are additional inputs that can be adjusted but these are not
changed in this example.</p>
<p>After setting the inputs as specified, we can click the <strong>Draw
SEM</strong> button (in the orange box), which creates new graphical
outputs. The <strong>Apply Changes</strong> button (in the purple box)
modifies the aesthetics of the existing graphical outputs that have been
created from the <strong>Lavaan Input</strong> menu. So, if you wish to
change the layout (from <em>Spring</em> to <em>Tree</em>) while keeping
all other aesthetics unchanged, then you can simply change the layout in
the <strong>Choose Layout Algorithms</strong> to <em>Tree</em>, and then
click the <strong>Apply Changes</strong> button.</p>
<p>It is important to know that <strong>Apply Changes</strong> button
modifies the aesthetics of graphical elements that have been created
from the <strong>Lavaan Input</strong> menu but not from other menus.
For example, if users create self-loop arrows later, these arrows will
not be affected by the <strong>Apply Changes</strong> button from the
<strong>Lavaan Input</strong> menu because these have not been produced
together from the <strong>lavaan</strong> strings. To identify which
components have been generated through <strong>lavaan</strong>, check
the <em>lavaan</em> column in the output tables; if it is set to
<em>TRUE</em>, then it is part of the <em>lavaan</em> output, and it is
susceptible to the aesthetic changes brought by the <strong>Apply
Changes</strong> button. For self-loop arrows, the <em>lavaan</em>
column will be set to <em>FALSE</em>.</p>
<p>Readers can also explore with the rest of layout choices to see how
layout affects the SEM diagram. Then, they can save the CSV outputs for
points, lines and text annotations from the <strong>ggsem</strong> app.
Also, if you are not satisfied with the current look of the SEM, you can
also change numerical inputs in the table <strong>directly</strong>,
such as the X and Y coordinates of the points, lines and texts.</p>
<p><strong>Optional exercise</strong>: Readers can replace the straight
two-way arrow with a curved two-way arrow between music and math by
removing the straight two-way arrow via the <strong>Lines Table</strong>
first, and then adding a curved two-way arrow under <strong>Line
Elements</strong>.</p>
</div>
<div class="section level2">
<h2 id="modifying-the-sem-diagram-from-ggsem-app-in-ggplot2-workflow">Modifying the SEM Diagram from <strong>ggsem</strong> app in
<strong>ggplot2</strong> Workflow<a class="anchor" aria-label="anchor" href="#modifying-the-sem-diagram-from-ggsem-app-in-ggplot2-workflow"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://smin95.github.io/ggsem/">ggsem</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># CSV files from ggsem app</span></span>
<span><span class="va">points_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"https://www.smin95.com/sem_points.csv"</span><span class="op">)</span></span>
<span><span class="va">lines_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"https://www.smin95.com/sem_lines.csv"</span><span class="op">)</span></span>
<span><span class="va">texts_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"https://www.smin95.com/sem_annotations.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sem_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span></span>
<span>  points_data <span class="op">=</span> <span class="va">points_data</span>,</span>
<span>  lines_data <span class="op">=</span> <span class="va">lines_data</span>,</span>
<span>  annotations_data <span class="op">=</span> <span class="va">texts_data</span>,</span>
<span>  element_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lines"</span>, <span class="st">"points"</span>, <span class="st">"annotations"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="co"># order priority: lines &lt; points &lt; texts</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"sem_plot.png"</span>, <span class="va">sem_plot</span>, width <span class="op">=</span> <span class="fl">9</span>, height <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<p><img src="sem_plot.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>Next, we create some empty space, which can be included by increasing
the range of y-axis. First, we extract the x and y ranges using
<code><a href="../reference/get_axis_range.html">get_axis_range()</a></code> and then modify the y-axis range using
<code><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_axis_range.html">get_axis_range</a></span><span class="op">(</span><span class="va">sem_plot</span><span class="op">)</span></span>
<span><span class="co">#&gt; $x_range</span></span>
<span><span class="co">#&gt; [1] -26.4  26.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $y_range</span></span>
<span><span class="co">#&gt; [1] -26.4  26.4</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sem_plot2</span> <span class="op">&lt;-</span> <span class="va">sem_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">26.4</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now, we can add title using the function <code><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate()</a></code>. It
is more convenient because it does not affect the scaling of the
figure’s components (unlike <code><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle()</a></code>).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sem_plot2b</span> <span class="op">&lt;-</span> <span class="va">sem_plot2</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"Intelligence Measure (SEM)"</span>, x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="fl">28</span>, size <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"sem_plot2b.png"</span>, <span class="va">sem_plot2b</span>, width <span class="op">=</span> <span class="fl">7</span>, height <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p><img src="sem_plot2b.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level2">
<h2 id="hacking-the-csv-outputs-from-ggsem-app">Hacking the CSV Outputs from <strong>ggsem</strong> app<a class="anchor" aria-label="anchor" href="#hacking-the-csv-outputs-from-ggsem-app"></a>
</h2>
<p>You can also modify the CSV outputs before converting them into a
<em>ggplot</em> object. Notice that font of the texts in the SEM diagram
is too faint, so we can <em>bold</em> it by directly replacing the
values in the <code>fontface</code> column of
<code>texts_data</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">texts_data</span><span class="op">$</span><span class="va">fontface</span> <span class="op">&lt;-</span> <span class="st">"bold"</span></span></code></pre></div>
<p>Then, we can recreate the figure again using
<code><a href="../reference/csv_to_ggplot.html">csv_to_ggplot()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sem_plot3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span></span>
<span>  points_data <span class="op">=</span> <span class="va">points_data</span>,</span>
<span>  lines_data <span class="op">=</span> <span class="va">lines_data</span>,</span>
<span>  annotations_data <span class="op">=</span> <span class="va">texts_data</span>,</span>
<span>  element_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lines"</span>, <span class="st">"points"</span>, <span class="st">"annotations"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">26.4</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"Intelligence Measure (SEM)"</span>, x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="fl">28</span>, size <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"sem_plot3.png"</span>, <span class="va">sem_plot3</span>, width <span class="op">=</span> <span class="fl">7</span>, height <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p><img src="sem_plot3.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>The modification of the SEM diagram with <strong>ggplot2</strong>
does not have to end here, however. I think the size of the latent
variable is a bit too small. I will increase it by modifying the CSV
file of <code>points_data</code>.</p>
<p><strong>ggsem</strong> automatically assigns circle to latent
variables and square to observed variables, as this is the standard in
SEM diagrams. So, we can first identify the latent variables as rows in
the data frame with circle points, and then modify their size.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">points_data</span><span class="op">$</span><span class="va">shape</span> <span class="op">==</span> <span class="st">"circle"</span><span class="op">)</span> <span class="co"># three indices are row numbers for latent variables</span></span>
<span><span class="co">#&gt; [1] 10 11 12</span></span></code></pre></div>
<p>We save these indices and selectively increase the size of the points
to 100.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">latent_variable_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">points_data</span><span class="op">$</span><span class="va">shape</span> <span class="op">==</span> <span class="st">"circle"</span><span class="op">)</span></span>
<span><span class="va">points_data</span><span class="op">[</span><span class="va">latent_variable_index</span>, <span class="op">]</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></code></pre></div>
<p>Then, we can recreate the figure with
<code><a href="../reference/csv_to_ggplot.html">csv_to_ggplot()</a></code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sem_plot4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span></span>
<span>  points_data <span class="op">=</span> <span class="va">points_data</span>,</span>
<span>  lines_data <span class="op">=</span> <span class="va">lines_data</span>,</span>
<span>  annotations_data <span class="op">=</span> <span class="va">texts_data</span>,</span>
<span>  element_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lines"</span>, <span class="st">"points"</span>, <span class="st">"annotations"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">26.4</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"Intelligence Measure (SEM)"</span>, x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="fl">28</span>, size <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"sem_plot4.png"</span>, <span class="va">sem_plot4</span>, width <span class="op">=</span> <span class="fl">7</span>, height <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p><img src="sem_plot4.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>In summary, the outputs from the <strong>ggsem</strong> app can be
directly modified using a <strong>ggplot2</strong> workflow, making each
and every graphical element computationally reproducible. I personally
prefer to get the general diagram out of the way using the app, and then
modify the details using <strong>ggplot2</strong> directly, as I have
demonstrated above. But this might differ among different users.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.smin95.com" class="external-link">Seung Hyun Min</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
