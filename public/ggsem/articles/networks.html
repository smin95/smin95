<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2. Plotting Networks • ggsem</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2. Plotting Networks">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/elements.html">1. Drawing Elements</a></li>
    <li><a class="dropdown-item" href="../articles/networks.html">2. Plotting Networks</a></li>
    <li><a class="dropdown-item" href="../articles/lavaan.html">3. Visualizing Structural Equation Modeling Diagrams</a></li>
    <li><a class="dropdown-item" href="../articles/annotations.html">4. Annotating Any ggplot Object</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/smin95/ggsem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>2. Plotting Networks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/smin95/ggsem/blob/HEAD/vignettes/networks.Rmd" class="external-link"><code>vignettes/networks.Rmd</code></a></small>
      <div class="d-none name"><code>networks.Rmd</code></div>
    </div>

    
    
<p>The previous chapter discussed how each graphical element could be
drawn using the <strong>ggsem</strong> app one-by-one. Here, we discuss
about drawing multiple points (nodes) or lines (edges) <strong>at
once</strong>. This would allow users to quickly draw a network using
the app.</p>
<p>Let’s run the app locally using the code below (faster than online:
<a href="https://smin95.shinyapps.io/ggsem/" class="external-link uri">https://smin95.shinyapps.io/ggsem/</a>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggsem</span><span class="fu">::</span><span class="fu"><a href="../reference/launch.html">launch</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="network-layouts-of-points-nodes">Network Layouts of Points (Nodes)<a class="anchor" aria-label="anchor" href="#network-layouts-of-points-nodes"></a>
</h2>
<p><img src="fig2a.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>The <strong>ggsem</strong> app provides numerous layouts, some of
which are derived from the <strong>igraph</strong> package. For
instance, if users draw 10 points by clicking the <strong>Add
Point</strong> button 10 times, and choose a certain layout, these
points can be sorted into a network configuration using the inputs in
the <strong>Draw Networks</strong> menu.</p>
<p>Let’s start by creating 10 points by clicking the <strong>Add
Point</strong> button 10 times. Since they are all located at the origin
(X = 0, Y = 0), they are all overlapped on the same plotting area. So
you will only be able to see one black point. To confirm whether there
are 10 points, check the <strong>Points Table</strong> and see if there
are 10 rows total (blue rectangle in the figure).</p>
<p>In the <strong>Draw Networks</strong> part of the menu, there are
some important inputs. These are:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Layout Type</strong>: There are eight provided layouts:
1) <em>Circle</em>, 2) <em>Grid</em>, 3) <em>Random</em>, 4)
<em>Star</em>, 5) <em>Fruchterman-Reingold</em>, 6)
<em>Kamada-Kawai</em>, 7) <em>Horizontal Straight Line</em>, and 8)
<em>Vertical Straight Line</em>.</p></li>
<li><p><strong>Point Distance</strong>: Relative distance between two
neighboring points/nodes.</p></li>
<li><p><strong>Center X Position</strong>: The X coordinate of the
network’s center.</p></li>
<li><p><strong>Center Y Position</strong>: The Y coordinate of the
network’s center.</p></li>
<li><p><strong>Gradient Start Color</strong>: The first color of the
gradient.</p></li>
<li><p><strong>Gradient End Color</strong>: The second color of the
gradient.</p></li>
</ol>
<p>There are three additional buttons. These are:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Auto-layout Points</strong>: If you click this button
(and if there are at least two <em>unlocked</em> points), the points
will be arranged into a specific configuration based on the
<strong>Layout Type</strong> input.</p></li>
<li><p><strong>Apply Gradient</strong>: If you click this button (and if
there are at least two <em>unlocked</em> points), the filling color of
the points will have a gradient palette.</p></li>
<li><p><strong>Lock Points</strong>: If this button is pressed, all
existing points in the <strong>Points Table</strong> will become
<em>locked</em>, becoming immune to the effect of subsequent effects of
<strong>Auto-layout Points</strong> and <strong>Apply Gradient</strong>.
In other words, if a batch of points has been arranged appropriately,
click this button to <em>keep</em> its characteristics (position and
color).</p></li>
</ol>
<p><img src="fig2b.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Now that we know what these inputs do, let’s start by setting the
layout of the 10 points as:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Layout Type</strong>: <em>Circle</em>
</li>
</ol>
<p>If you click the <strong>Auto-layout Points</strong> button, the
points will be sorted into a circle, whose center is at the origin (X =
0, Y = 0) as specified. Since, there is an empty space in the middle, we
can add one more point at the center (X = 0, Y = 0) by clicking the
<strong>Add Point</strong> button.</p>
<p>Next, we can set the gradient filling color of all points by setting
the inputs as:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Gradient Start Color</strong>: #C0E1FC</p></li>
<li><p><strong>Gradient End Color</strong>: #44599E</p></li>
</ol>
<p>since all 11 points are currently <em>unlocked</em> (see
<em>locked</em> column in <strong>Points Table</strong>), the gradient
colors can be applied to them by clicking <strong>Apply
Gradient</strong>.</p>
<p>Now, we have a small blue-colored network of eleven points.</p>
</div>
<div class="section level2">
<h2 id="connecting-the-points-in-a-network">Connecting the Points in a Network<a class="anchor" aria-label="anchor" href="#connecting-the-points-in-a-network"></a>
</h2>
<p><img src="fig2c.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>To connect the points in the navy network, we can add lines, so we
set (at the top dropdown menu):</p>
<ol style="list-style-type: decimal">
<li>
<strong>Choose Element Type</strong>: <em>Line</em>
</li>
</ol>
<p>There are many ways in which the poinst can be connected with lines
(edges) using the <strong>ggsem</strong> app. Let’s shift our attention
to the dropdown menu of <strong>Choose Edge Connection Type</strong>
under <strong>Draw Networks</strong>. There are several options:</p>
<ol style="list-style-type: decimal">
<li><p><em>Fully Connected</em>: Connects edges between each pair of all
nodes</p></li>
<li><p><em>Nearest Neighbor</em>: Links each node to its closest
neighbor.</p></li>
<li><p><em>Connect to Central Node</em>: Links peripheral nodes to a
central node (geometric center based on coordinates).</p></li>
<li><p><em>Connect to Particular Node</em>: Links all nodes to a
particular node of choice. When choosing this menu, users should supply
the ID number (from the <strong>Points Table</strong>’s first column) of
the point in <strong>Select Central Node</strong>.</p></li>
<li><p><em>Random Graph</em>: Links nodes in a random fashion based on
the Erdos-Renyi model. It is different each time.</p></li>
</ol>
<p>Here, as practice, instead of <em>Connect to Central Node</em>, we
can choose the option <em>Connect to Particular Node</em>, find the ID
number of the central point in the <strong>Points Table</strong>, and
connect all peripheral nodes to the central one.</p>
<p>It turns out the ID of the central node is 11 as it has the
coordinate of X = 0 and Y = 0. We can choose the aesthetics of the lines
that will automatically generated as:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Edge Color</strong>: #CACFDB</p></li>
<li><p><strong>Edge Width</strong>: 2</p></li>
<li><p><strong>Edge Alpha</strong>: 0.5</p></li>
</ol>
<p><strong>Edge Spacing</strong> controls the space between nodes and
endpoints of edges.</p>
<p><img src="fig2d.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Next, we will create another network using these layout functions.
But before that, we will need to <strong>lock</strong> these points, so
that later usages of **Draw Networks* functions will not affect their
positions and edge connections.</p>
<p>To do so, we go back to the <strong>Point</strong> menu, and click
the <strong>Lock Points</strong> button (orange rectangle) under
<strong>Draw Networks</strong>.</p>
</div>
<div class="section level2">
<h2 id="drawing-a-second-network">Drawing a Second Network<a class="anchor" aria-label="anchor" href="#drawing-a-second-network"></a>
</h2>
<p><img src="fig2e.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>For the second network, let’s add 11 points by clicking the
<strong>Add Point</strong> button 11 times. Make sure you check the
<strong>Points Table</strong> and see if there are additional 11 rows
(22 rows total).</p>
<p>Set the layout of the points as:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Layout Type</strong>: <em>Random</em></p></li>
<li><p><strong>Point Distance</strong>: 8</p></li>
<li><p><strong>Center X Position</strong>: 30</p></li>
<li><p><strong>Center Y Position</strong>: 0</p></li>
<li><p><strong>Gradient Start Color</strong>: #FFC2E7</p></li>
<li><p><strong>Gradient End Color</strong>: #9E4468</p></li>
</ol>
<p>Then, click the <strong>Auto-layout Points</strong> and <strong>Apply
Gradient</strong> buttons.</p>
<p><img src="fig2f.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Then, we adjust the focus of the plotting window by setting:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Zoom Level</strong>: 1.4</p></li>
<li><p><strong>Horizontal Position</strong>: 16</p></li>
<li><p><strong>Vertical Position</strong>: 0</p></li>
</ol>
<p><img src="fig2g.png" width="40%" style="display: block; margin: auto auto auto 0;"></p>
<p>Now, we go back to the <strong>Line</strong> menu, and automatically
generate lines. We can choose the option <em>Fully Connected</em> with
these aesthetics:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Edge Color</strong>: #DBCAD3</p></li>
<li><p><strong>Edge Width</strong>: 1</p></li>
<li><p><strong>Edge Alpha</strong>: 0.3</p></li>
</ol>
<p>Then, we lock the points in the <strong>Point</strong> menu by
clicking <strong>Lock Points</strong>, which will then stabilize the
second network into the plotting space.</p>
<p>We can then save the CSV files for the points and lines, and load
them in RStudio using a typical <strong>ggplot2</strong> workflow.</p>
</div>
<div class="section level2">
<h2 id="modifying-the-plot-from-ggsem-app-in-ggplot2-workflow">Modifying the Plot from <strong>ggsem</strong> app in
<strong>ggplot2</strong> Workflow<a class="anchor" aria-label="anchor" href="#modifying-the-plot-from-ggsem-app-in-ggplot2-workflow"></a>
</h2>
<p>As in the first chapter, we can modify the plot output from the
<strong>ggsem</strong> app by usihg <strong>ggplot2</strong> functions
directly.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://smin95.github.io/ggsem/">ggsem</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># CSV files from ggsem app</span></span>
<span><span class="va">points_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"https://www.smin95.com/points2.csv"</span><span class="op">)</span></span>
<span><span class="va">lines_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"https://www.smin95.com/lines2.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span></span>
<span>  points_data <span class="op">=</span> <span class="va">points_data</span>,</span>
<span>  lines_data <span class="op">=</span> <span class="va">lines_data</span>,</span>
<span>  zoom_level <span class="op">=</span> <span class="fl">1.4</span>, <span class="co"># From the ggsem app</span></span>
<span>  horizontal_position <span class="op">=</span> <span class="fl">14</span>, <span class="co"># From the ggsem app</span></span>
<span>  vertical_position <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  element_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lines"</span>, <span class="st">"points"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="co"># order priority: lines &lt; points</span></span></code></pre></div>
<p>We use <code><a href="../reference/csv_to_ggplot.html">csv_to_ggplot()</a></code> to convert the CSV outputs from
the <em>shiny</em> app into a <em>ggplot</em> object. Here, we set the
order of elements so that the points are more front than the lines using
the argument <code>element_order</code>. The <code>lines</code> is
written first, followed by <code>points</code>, so <code>points</code>
are more recently applied, and hence takes the order priority. We use
the same <code>zoom_level</code>, <code>horizontal_position</code> and
<code>vertical_position</code> as those in the <strong>ggsem</strong>
app.</p>
<p>Notice that we do not have CSV files for text annotations and
self-loop arrows. So here, we do not provide them, and the
<code><a href="../reference/csv_to_ggplot.html">csv_to_ggplot()</a></code> still runs smoothly. So, it is unnecessary
to load empty CSV for a class of graphical element if it was not
previously added in the app.</p>
<p>We can save the figure as a PNG file to verify whether it is
identical to the one we have drawn on the ggsem Shiny app. Here, we set
<code>width = 9</code> and <code>height = 9</code> as the dimension of
the exported image file. This is what the figure looks like:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"p3.png"</span>, <span class="va">p3</span>, width <span class="op">=</span> <span class="fl">9</span>, height <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre></div>
<p><img src="p3.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>We can also add text annotations to our graphical output using
typical ggplot2 functions, such as <code><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate()</a></code>.</p>
<p>First, we extract the plot’s ranges of x-axis and y-axis using
<code><a href="../reference/get_axis_range.html">get_axis_range()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_axis_range.html">get_axis_range</a></span><span class="op">(</span><span class="va">p3</span><span class="op">)</span></span>
<span><span class="co">#&gt; $x_range</span></span>
<span><span class="co">#&gt; [1] -16.8  44.8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $y_range</span></span>
<span><span class="co">#&gt; [1] -30.8  30.8</span></span></code></pre></div>
<p>Now that we know the ranges, we can decide where to exactly add the
text annotations. We will add texts on top of each network.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p4</span> <span class="op">&lt;-</span> <span class="va">p3</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"First Network"</span>, x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">8</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"Second Network"</span>, x <span class="op">=</span> <span class="fl">29</span>, y <span class="op">=</span> <span class="fl">16</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">8</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="p4.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
<p>Next, we can remove the extra white space around the networks by
reducing the ranges of x- and y-axes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p4b</span> <span class="op">&lt;-</span> <span class="va">p4</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">12</span>, <span class="fl">21</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then, save the figure using <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave()</a></code> with
<code>width = 9</code> and <code>height = 6.3</code> (after some trials
and error!).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"p4b.png"</span>, <span class="va">p4b</span>, width <span class="op">=</span> <span class="fl">9</span>, height <span class="op">=</span> <span class="fl">6.3</span><span class="op">)</span></span></code></pre></div>
<p><img src="p4b.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level2">
<h2 id="hacking-the-csv-outputs-from-ggsem-app">Hacking the CSV Outputs from <strong>ggsem</strong> app<a class="anchor" aria-label="anchor" href="#hacking-the-csv-outputs-from-ggsem-app"></a>
</h2>
<p>You can also hack the CSV output values. Here, I will separately plot
each network and then combine them using the <strong>patchwork</strong>
package.</p>
<p>I will split <code>points_data</code> and <code>lines_data</code>
data frames. We know that the first network has eleven points and ten
lines, so we include them in <code>points_data1</code> and
<code>lines_data2</code>, and include the rest in
<code>points_data2</code> and <code>lines_data2</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span> <span class="co"># install.packages('patchwork')</span></span>
<span></span>
<span><span class="va">points_data1</span> <span class="op">&lt;-</span> <span class="va">points_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">11</span>, <span class="op">]</span> <span class="co"># First network's point</span></span>
<span><span class="va">points_data2</span> <span class="op">&lt;-</span> <span class="va">points_data</span><span class="op">[</span><span class="fl">12</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">points_data</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">lines_data1</span> <span class="op">&lt;-</span> <span class="va">lines_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span> <span class="co"># First network's lines</span></span>
<span><span class="va">lines_data2</span> <span class="op">&lt;-</span> <span class="va">lines_data</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">lines_data</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<p>Next, we separately convert the CSV outputs into two networks. Notice
that for these two plots, I reduce the <code>zoom_level</code> (from 1.4
to 0.7) to remove the surrounding empty space and shift the
<code>horizontal_position</code> so place the network in the plotting
space’s center. The change in the <code>zoom_level</code> will alter the
looks slightly.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span></span>
<span>  points_data <span class="op">=</span> <span class="va">points_data1</span>,</span>
<span>  lines_data <span class="op">=</span> <span class="va">lines_data1</span>,</span>
<span>  zoom_level <span class="op">=</span> <span class="fl">.7</span>, <span class="co"># Zoom-in to remove extra space</span></span>
<span>  horizontal_position <span class="op">=</span> <span class="fl">0</span>, <span class="co"># 0 because blue network's center is at X = 0, Y = 0</span></span>
<span>  vertical_position <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  element_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lines"</span>, <span class="st">"points"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">net2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv_to_ggplot.html">csv_to_ggplot</a></span><span class="op">(</span></span>
<span>  points_data <span class="op">=</span> <span class="va">points_data2</span>,</span>
<span>  lines_data <span class="op">=</span> <span class="va">lines_data2</span>,</span>
<span>  zoom_level <span class="op">=</span> <span class="fl">.7</span>, <span class="co"># Zoom-in to remove extra space</span></span>
<span>  horizontal_position <span class="op">=</span> <span class="fl">30</span>, <span class="co"># 30 because red network's center is at X = 30, Y = 0</span></span>
<span>  vertical_position <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  element_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lines"</span>, <span class="st">"points"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Then, we can add title using <code><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle()</a></code> to each of the
plots.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net1b</span> <span class="op">&lt;-</span> <span class="va">net1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"First Network"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Title is aligned to the center</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">24</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Font size of the title</span></span>
<span></span>
<span></span>
<span><span class="va">net2b</span> <span class="op">&lt;-</span> <span class="va">net2</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Second Network"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">24</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next, using the <code>+</code> operator from
<strong>patchwork</strong>, we combine <code>net1</code> and
<code>net2</code> into one <strong>ggplot2</strong> object.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net_tgd</span> <span class="op">&lt;-</span> <span class="va">net1b</span> <span class="op">+</span> <span class="va">net2b</span></span></code></pre></div>
<p>We can now save <code>net_tgd</code> into an image file using the
<code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave()</a></code> function with <code>width = 12.5</code> and
<code>height = 8</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"net_tgd.png"</span>, <span class="va">net_tgd</span>, width <span class="op">=</span> <span class="fl">12.5</span>, height <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p><img src="net_tgd.png" width="90%" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level2">
<h2 id="labelling-the-nodes-with-ggplot2-workflow">Labelling the Nodes with <strong>ggplot2</strong> workflow<a class="anchor" aria-label="anchor" href="#labelling-the-nodes-with-ggplot2-workflow"></a>
</h2>
<p>I will now discuss how we can label nodes using a
<strong>ggplot2</strong> workflow. Here, we will label
<code>net1</code>. We start by creating a data frame of text labels and
their X and Y coordinates.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">texts_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">points_data1</span><span class="op">$</span><span class="va">x</span>,</span>
<span>  y <span class="op">=</span> <span class="va">points_data1</span><span class="op">$</span><span class="va">y</span>,</span>
<span>  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"S"</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">points_data1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">texts_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;           x            y label</span></span>
<span><span class="co">#&gt; 1  10.00000 0.000000e+00    S1</span></span>
<span><span class="co">#&gt; 2   8.09017 5.877853e+00    S2</span></span>
<span><span class="co">#&gt; 3   3.09017 9.510565e+00    S3</span></span>
<span><span class="co">#&gt; 4  -3.09017 9.510565e+00    S4</span></span>
<span><span class="co">#&gt; 5  -8.09017 5.877853e+00    S5</span></span>
<span><span class="co">#&gt; 6 -10.00000 1.224606e-15    S6</span></span></code></pre></div>
<p>The data frame <code>texts_data</code> contains three columns: 1)
<code>x</code>: contains x coordinates of <code>point_data1</code>, 2)
<code>y</code>: contains y coordinates of <code>point_data1</code>, 3)
label: contains character strings.</p>
<p>Next, we use <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code> to label the text annotations
for each row (observation) of <code>texts_data</code>. We map the
coordinates and labels within <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code> to the columns of the
data frame.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net1</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">texts_data</span>, fontface <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span></span></code></pre></div>
<p><img src="networks_files/figure-html/unnamed-chunk-27-1.png" width="576"></p>
<p>We can improve the visibility of the text on each node by applying
unique color and adjusting its text size. To use custom colors in
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_color_identity()</a></code> should
also be used to ensure that the colors are properly rendered.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cList</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"#494949"</span>, <span class="st">"#494949"</span>, <span class="st">"#5B5B5B"</span>, <span class="st">"#5B5B5B"</span>, <span class="st">"#EBEBEB"</span>,</span>
<span>  <span class="st">"#EBEBEB"</span>, <span class="st">"#EBEBEB"</span>, <span class="st">"#EBEBEB"</span>, <span class="st">"#EBEBEB"</span>, <span class="st">"#EBEBEB"</span>,</span>
<span>  <span class="st">"#FDFDFD"</span></span>
<span><span class="op">)</span> <span class="co"># text color for each node label</span></span>
<span></span>
<span><span class="va">texts_data</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="va">cList</span></span>
<span></span>
<span><span class="va">net1</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span>, color <span class="op">=</span> <span class="va">color</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">texts_data</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_color_identity</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="networks_files/figure-html/unnamed-chunk-28-1.png" width="576"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.smin95.com" class="external-link">Seung Hyun Min</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
